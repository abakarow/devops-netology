# Домашнее задание по лекции "3.7 Компьютерные сети (лекция 2)"
## 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
### Ответ:
Linux  `ip` с параметром `link` или `ifconfig`
Windows `ipconfig`
## 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
### Ответ:
`lldpd`

`lldpctl` - информация о соседях на интерфейсе (соседей разрешена передача данной информации).
## 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
### Ответ:
Технология VLAN. В Linux для работы с VLAN используется пакет `vlan`. После его установки в файле настройки интерфейсов
`/etc/network/interfaces` необходимо прописать интерфейсы vlan, пример из лекции:
```shell
auto vlan1400
iface vlan1400 inet static
 address 192.168.1.1
 netmask 255.255.255.0
 vlan_raw_device eth0
auto eth0.1400
iface eth0.1400 inet static
 address 192.168.1.1
 netmask 255.255.255.0
 vlan_raw_device eth0
```
Либо `netplan`, в этом случае в файле
`/etc/netplan/01-netcfg.yaml` следует добавить следующие строки:
```yaml
vlans:
  vlan50:       #VLAN name
    id: 50      #VLAN ID
    link: eth0  #Interface
    dhcp4: true #DHCP enable
```
Далее следует проверить конфигурацию командой `netplan generate`, после чего применить конфигурацию командой 
`netplan apply`
## 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
###  Ответ:
В Linux есть следующие виды агрегации с различными вариантами балансировки:
* **Mode-0 (balance-rr)** – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки
и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. 
Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора 
не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.
* **Mode-1 (active-backup)** – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении 
проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.
* **Mode-2 (balance-xor)** – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле 
_`((MAC src) XOR (MAC dest)) % <число интерфейсов>`_. Режим дает балансировку нагрузки и отказоустойчивость. 
Не требуется дополнительной настройки коммутатора/коммутаторов.
* **Mode-3 (broadcast)** – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость.
Рекомендуется только для использования MULTICAST трафика.
* **Mode-4 (802.3ad или LACP)** – динамическое объединение одинаковых портов. В данном режиме можно значительно 
увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка 
и настройка коммутатора/коммутаторов.
* **Mode-5 (balance-tlb)** – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным 
интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется
специальной поддержки и настройки коммутатора/коммутаторов.
* **Mode-6 (balance-alb)** – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки 
нагрузки чем Mode-5. Обеспечивает балансировку нагрузки как исходящего, так и входящего трафика. Не требуется 
 специальной поддержки и настройки коммутатора/коммутаторов.

**Пример конфигурации `netplan` для настройки агрегации через LACP:**
```yaml
network: 
    renderer: networkd 
    version: 2 
    ethernets: 
        eth0:
          dhcp4: no
        eth1:
          dhcp4: no
    bonds: 
      bond0:
        dhcp4: true
        interfaces: [eth0, eth1]
        parameters:
          mode: 802.3ad
          mii-monitor-interval: 1
```
## 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
### Ответ:
В подсети с маской /29 имеется 6 адресов (8 если считать адрес самой сети и бродкаст адрес).

Из сети /24 можно получить 32 подсеть с маской 29.

Примеры сетей:
* 10.10.10.0/29
* 10.10.10.8/29
* 10.10.10.16/29
* ...
* 10.10.10.240/29
* 10.10.10.248/29

## 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
### Ответ:
Возможно использовать адреса из подсети 100.64.0.0/10: например 100.64.0.0/26.

## 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
### Ответ:
Linux  `ip neigh`

Windows `arp -a`. 

Для очистки ARP таблицы в Linux `ip link set arp off dev <interface>; ip link set arp on dev <interface>` (команда 
`ip -s neigh flush all` не удаляет записи, а делает их недействительными), в Windows `netsh interface ip delete arpcache`

Удалить конкретную запись в Linux `ip neigh del dev <interface> <host>`, в Windows `arp -d <host>`

## 8* Установите эмулятор [EVE-ng](https://github.com/svmyasnikov/eve-ng).
### Комментарий:
Работалс ним изучая циско