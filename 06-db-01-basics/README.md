# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.
## Решение 

    Электронные чеки в json виде - NoSQL, такая бвзв хранит данные как документ. 
    Склады и автомобильные дороги для логистической компании - графовые БД (как атрибут можно задать выбор оптимального пути)
    Генеалогические деревья - иерархическая БД (структура ввиде ветвей)
    Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - Key-Value БД.
    Отношения клиент-покупка для интернет-магазина - реляционные БД (имеют отношения между таблицами) 

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Решение 
    Данные записываются на все узлы с задержкой до часа (асинхронная запись)
    CA, PC/EL
    При сетевых сбоях, система может разделиться на 2 раздельных кластера
    PA, PA/EL
    Система может не прислать корректный ответ или сбросить соединение
    PC, PA/EC

### Доработка 
#### Данные записываются на все узлы с задержкой до часа (асинхронная запись)
CAP
AP - данные доступны, но не согласованны в единицу времени 
PACELC
PA/EC 
PA/EL
Здесь в обоих случаях данные доступны, но не согласованы для всех узлов если они есть, с оговоркой, что данные  в первом случае согласованы и доступны если всего 1 узел, а во втором случае несогласованны но идут с минимальной задержкой 
#### При сетевых сбоях, система может разделиться на 2 раздельных кластера
CAP
AP - отсутствует согласованность 
PACELC
PA/EL
#### Система может не прислать корректный ответ или сбросить соединение
CAP
PC
PACELC
PC/EC
## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Решение 

Принципы BASE и ACID не могут сочетаться, так как:

    BASE: позволяет проектировать высокопроизводительные системы, в ответе могут быть неверные данные, неустойчивое состояние.
    ACID: позволяет проектировать высоконадежные системы, надежность и предсказуемость.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

## Решение 

Redis.

Минусы:

    риски при сохранении данных (могут и не сохранится);
    сложности с настройкой кластера;
    требования к объему оперативной памяти;
